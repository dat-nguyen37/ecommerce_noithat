{"ast":null,"code":"import ProductItem from '@/components/productItem/ProductItem.vue';\nimport axios from 'axios';\nexport default {\n  name: \"ProductDetailView\",\n  components: {\n    ProductItem\n  },\n  props: ['getCart'],\n  data() {\n    return {\n      productId: this.$route.params.id,\n      data: {},\n      listproduct: [],\n      quantity: 1,\n      open: true\n    };\n  },\n  mounted() {\n    this.getProduct();\n  },\n  watch: {\n    '$route.params.id': function (newProductId) {\n      this.productId = newProductId;\n      this.getProduct();\n    }\n  },\n  methods: {\n    openDescription() {\n      this.open = true;\n    },\n    openComment() {\n      this.open = false;\n    },\n    async getProduct() {\n      try {\n        const res = await axios.get('product/' + this.productId);\n        this.data = res.data;\n        this.getProductByCategoryId();\n      } catch (err) {\n        alert('Loi!');\n      }\n    },\n    async getProductByCategoryId() {\n      try {\n        const res = await axios.get(`product/category/${this.data[0].categoryId}`);\n        this.listproduct = res.data;\n      } catch (err) {\n        alert('Loi!');\n      }\n    },\n    incrementQuantity() {\n      if (this.quantity > 1) {\n        this.quantity--;\n      }\n    },\n    decrementQuantity() {\n      if (this.quantity < 10) {\n        this.quantity++;\n      }\n    },\n    async handleAddToCart(id, price) {\n      try {\n        await axios.post('cart/create', {\n          productId: id,\n          quantity: this.quantity,\n          totalAmount: price * this.quantity\n        });\n        this.getCountCart();\n        alert(\"Add to cart success\");\n      } catch (err) {\n        alert(\"Loi!\");\n      }\n    }\n  }\n};","map":{"version":3,"names":["ProductItem","axios","name","components","props","data","productId","$route","params","id","listproduct","quantity","open","mounted","getProduct","watch","$route.params.id","newProductId","methods","openDescription","openComment","res","get","getProductByCategoryId","err","alert","categoryId","incrementQuantity","decrementQuantity","handleAddToCart","price","post","totalAmount","getCountCart"],"sources":["src/views/ProductDetailView.vue"],"sourcesContent":["<template>\r\n    <div class=\"max-w-6xl h-auto mx-auto\">\r\n        <div class=\"max-w-6xl border-b mx-auto py-2\">\r\n            <h6><router-link :to=\"{name:'home'}\">Trang chủ</router-link> / <span class=\"text-gray-500\">{{ data[0].name }}</span></h6>\r\n        </div>\r\n        <div class=\"grid grid-cols-12 gap-4\">\r\n            <div class=\"col-span-7\">\r\n                <img :src=\"data[0].image\" alt=\"\">\r\n            </div>\r\n            <div class=\"col-span-5\">\r\n                <div class=\"py-2 border-b-2 border-black \">\r\n                    <h1 class=\"font-bold\">{{ data[0].name }}</h1>\r\n                    <span>MÃ SP: {{ data[0].id }}</span>\r\n                </div>\r\n                <div class=\"text-center text-4xl border-b text-red-500\">{{ data[0].price*quantity | numeral}} VND    </div>\r\n                <div class=\"w-full\">\r\n                    <label for=\"\">Số lượng:</label>\r\n                    <div class=\"flex mt-4 text-4xl\">\r\n                        <button type=\"button\" class=\"border border-black w-10 h-10 text-center\" @click=\"incrementQuantity\">-</button>\r\n                        <input type=\"number\" name=\"quantity\" v-model=\"quantity\" placeholder=\"1\" min=\"1\" class=\"w-14 text-center border border-black\">\r\n                        <button type=\"button\" class=\"border border-black w-10 h-10 text-center\" @click=\"decrementQuantity\">+</button>\r\n                    </div>\r\n                    <button class=\"mt-4 w-full h-14 bg-[#271511] text-white text-3xl rounded-md flex items-center px-2\" @click=\"handleAddToCart(data[0].id,data[0].price)\">\r\n                        <font-awesome-icon icon=\"shopping-cart\" class=\"\" />\r\n                        <span class=\"mx-auto\">Đặt hàng</span>\r\n                    </button>\r\n                    <button class=\"mt-4 w-full h-14 bg-[#271511] text-white text-3xl rounded-md flex items-center px-2\">\r\n                        <div class=\"w-12 h-12 border-2 rounded-full flex justify-center items-center\">\r\n                            <font-awesome-icon icon=\"phone\" class=\"\" />\r\n                        </div>\r\n                        <a href=\"tel:19002812\" class=\"mx-auto\">19002812</a>\r\n                    </button>\r\n                    <div class=\"mt-4\">\r\n                       <h1>Địa chỉ mua hàng:</h1>\r\n                       <p>Showroom 1: Thái thịnh, Đống Đa, Hà Nội</p>\r\n                    </div>\r\n                    <p class=\"font-bold\">Thể loại: {{ data[0].categoryName }}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-span-8 border\">\r\n                <div class=\"grid grid-cols-2 gap-1\">\r\n                    <div class=\"h-10 bg-[#271511] text-white leading-10 text-center hover:cursor-pointer\" @click=\"openDescription()\">\r\n                        Thông tin sản phẩm\r\n                    </div>\r\n                    <div class=\"h-10 bg-[#271511] text-white leading-10 text-center hover:cursor-pointer\" @click=\"openComment()\">\r\n                        Đánh giá nhận xét(0)\r\n                    </div>\r\n                </div>\r\n                <div v-if=\"open\" class=\"p-4\"><p>{{ data[0].description }}</p></div>\r\n                <div v-else class=\"p-4\">\r\n                    <div className='border border-1 p-4 d-none'>\r\n                            <h5 className='fw-bold'>Đánh giá ({comments?.average}/5)</h5>\r\n                            <div className='w-100 border border-2 border-danger my-1 p-4'>\r\n                                <div className='d-flex'>\r\n                                    <p className='fw-bold'>Đánh giá của bạn:</p>\r\n                                    <select name=\"star\" onChange={changeInput} id=\"\" className='mx-4' style={{width:\"70px\",height:\"30px\"}}>\r\n                                        <option value=\"1\">1 sao</option>\r\n                                        <option value=\"2\">2 sao</option>\r\n                                        <option value=\"3\">3 sao</option>\r\n                                        <option value=\"4\">4 sao</option>\r\n                                        <option value=\"5\">5 sao</option>\r\n                                    </select>\r\n                                </div>\r\n                                <p className='fw-bold'>Nhận xét của bạn</p>\r\n                                <textarea className='w-100 px-2' name=\"description\" onChange={changeInput} placeholder='Viết gì đó'></textarea>\r\n                                <div className='w-100 mb-4'>\r\n                                    <input type=\"file\" id='image' accept=\"image/*\" onChange={e=>setImage(e.target.files[0])} name='image' hidden/>\r\n                                    <input type=\"file\" id='video' accept=\"video/*\" onChange={e=>setVideo(e.target.files[0])} name='video' hidden/>\r\n                                    <label type=\"button\" htmlFor=\"image\" className='border border-2 border-danger py-2 text-center' style={{fontSize:\"12px\",width:'100px',height:'40px'}}><i className='fa fa-photo text-danger'></i>Thêm ảnh</label>\r\n                                    <label type=\"button\" htmlFor=\"video\" className=\"border border-2 border-danger mx-2 py-2 text-center\" style={{fontSize:\"12px\",width:'100px',height:'40px'}}><i className='fa fa-camera text-danger'></i>Thêm video</label>\r\n                                    <div className='d-flex flex-wrap gap-2 mt-1 w-100 '>\r\n                                        {imageUrl && imageUrl.map(i=>(\r\n                                            <img src={i} alt=\"\" style={{width:\"70px\",height:\"70px\"}}/>\r\n                                        ))}\r\n                                        {videoUrl && videoUrl.map((v)=>(\r\n                                            <video controls autoPlay style={{width:\"70px\",height:\"70px\"}}>\r\n                                             <source src={v} type=\"video/mp4\" />\r\n                                           </video>\r\n                                        ))}\r\n                                    </div>  \r\n                                </div>\r\n                                <div className='border border-1 border-dark bg-light fs-5 d-flex justify-content-center align-items-center' onClick={handleClick} style={{width:\"100px\",height:\"40px\",cursor:\"pointer\"}}>Gửi đi</div>\r\n                                <div className='w-100 mt-3 border-top border-4 border-dark'>\r\n                                     {comments?.data?.map((c,index)=>(\r\n                                    <div className='w-100 border-bottom border-1'>\r\n                                         <div className='d-flex mt-3 align-items-center' key={index}>\r\n                                            <div className=\"border rounded-circle\" style={{width:\"40px\",height:\"40px\"}}>\r\n                                              <img src={c?.image} alt=\"\" className='img-fluid rounded-circle'/> \r\n                                            </div>\r\n                                            <div className='mx-2'>\r\n                                                <span style={{fontSize:\"13px\"}}>{c.name}</span>\r\n                                                <div className='rating text-warning' style={{fontSize:\"10px\"}}>\r\n                                                {[...Array(c.comment.star)].map((_, starIndex) => (\r\n                                                    <i className='fa fa-star' key={starIndex}></i>\r\n                                                    ))}\r\n                                                </div>\r\n                                                <p style={{fontSize:\"10px\"}}>{c?.comment.createdAt}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className='w-100 mb-1 px-2'>\r\n                                            <span>{c.comment.description}</span>\r\n                                        </div>\r\n                                        <div className='w-100 d-flex flex-wrap mx-2 mb-1 gap-2'>\r\n                                            {c?.comment?.image?.map((i,index)=>(\r\n                                                <img src={i} alt=\"\" key={index} style={{width:\"70px\",height:\"70px\",border:\"1px solid gray\"}}/>\r\n                                            ))}\r\n                                            {c?.comment?.video?.map((v,index)=>(\r\n                                                <video controls autoPlay width={70} height={70}>\r\n                                                 < source src={v} type=\"video/mp4\" />\r\n                                                </video>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                ))} \r\n                                </div>\r\n                            </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-span-4 border\">\r\n                <div class=\"w-full h-10 bg-[#271511] text-white text-center leading-10\">\r\n                    LÍ DO BẠN NÊN CHỌN\r\n                </div>\r\n                <div class=\"w-full flex flex-col p-2\">\r\n                    <img src=\"https://pos.nvncdn.com/940d71-40111/store/20181231_500uZWWGMYZ6cglXbfR81lgJ.png\" alt=\"\" class=\"w-40 h-20 self-center\">\r\n                    <ul class=\" mt-2\">\r\n                        <li class=\"relative py-2\">Thương hiệu - dịch vụ Việt Nam phát triển bền vững do Chủ tịch nước trao tặng</li>\r\n                        <li class=\"relative py-2\">Là doanh nghiệp tiêu biểu trong lĩnh vực Kiến trúc- Nội thất</li>\r\n                        <li class=\"relative py-2\">Đội ngũ kiến trúc sư giàu kinh nghiệm, xu hướng thiết kế hiện đại</li>\r\n                        <li class=\"relative py-2\">Chế độ bảo hành tại nhà, bảo trì vĩnh viễn tất cả sản phẩm</li>\r\n                        <li class=\"relative py-2\">Vận chuyển miễn phí cho khu vụ nội thành hoặc 50km đầu</li>\r\n                        <li class=\"relative py-2\">Kiểm tra hàng, thanh toán tại nhà khi nhận hàng</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"w-full mt-5\">\r\n            <div class=\"h-10 bg-[#271511] text-white leading-10 text-center text-2xl uppercase\">\r\n                        Sản phẩm liên quan\r\n            </div>\r\n            <div class=\" grid grid-rows-1 grid-cols-4 gap-3 p-2\">\r\n                <ProductItem v-for=\"item in listproduct\" :key=\"item._id\" :item=\"item\"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport ProductItem from '@/components/productItem/ProductItem.vue';\r\nimport axios from 'axios';\r\nexport default {\r\n    name:\"ProductDetailView\",\r\n    components:{ProductItem},\r\n    props:['getCart'],\r\n    data(){\r\n        return{\r\n            productId:this.$route.params.id,  \r\n            data:{},\r\n            listproduct:[],\r\n            quantity:1,\r\n            open:true\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getProduct()\r\n    },\r\n    watch: {\r\n        '$route.params.id': function(newProductId) {\r\n            this.productId = newProductId;\r\n            this.getProduct();\r\n        }\r\n    },\r\n    methods:{\r\n        openDescription(){\r\n            this.open=true\r\n        },\r\n        openComment(){\r\n            this.open=false\r\n        },\r\n        async getProduct(){\r\n            try {\r\n                const res=await axios.get('product/'+this.productId)\r\n                this.data=res.data\r\n                this.getProductByCategoryId()\r\n            } catch (err) {\r\n                alert('Loi!')\r\n            }\r\n        },\r\n        async getProductByCategoryId(){\r\n            try {\r\n                const res=await axios.get(`product/category/${this.data[0].categoryId}`)\r\n                this.listproduct=res.data\r\n            } catch (err) {\r\n                alert('Loi!')\r\n            }\r\n        },\r\n        incrementQuantity(){\r\n            if(this.quantity>1){\r\n                this.quantity--\r\n            }\r\n        },\r\n        decrementQuantity(){\r\n            if(this.quantity<10){\r\n                this.quantity++\r\n            }\r\n        },\r\n        async handleAddToCart(id,price){\r\n            try {\r\n                await axios.post('cart/create',{\r\n                    productId:id,\r\n                    quantity:this.quantity,\r\n                    totalAmount:price*this.quantity\r\n                })\r\n                this.getCountCart()\r\n                alert(\"Add to cart success\")\r\n            } catch (err) {\r\n                alert(\"Loi!\")\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"css\" scoped>\r\n</style>"],"mappings":"AAmJA,OAAAA,WAAA;AACA,OAAAC,KAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAH;EAAA;EACAI,KAAA;EACAC,KAAA;IACA;MACAC,SAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;MACAJ,IAAA;MACAK,WAAA;MACAC,QAAA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,UAAA;EACA;EACAC,KAAA;IACA,6BAAAC,CAAAC,YAAA;MACA,KAAAX,SAAA,GAAAW,YAAA;MACA,KAAAH,UAAA;IACA;EACA;EACAI,OAAA;IACAC,gBAAA;MACA,KAAAP,IAAA;IACA;IACAQ,YAAA;MACA,KAAAR,IAAA;IACA;IACA,MAAAE,WAAA;MACA;QACA,MAAAO,GAAA,SAAApB,KAAA,CAAAqB,GAAA,mBAAAhB,SAAA;QACA,KAAAD,IAAA,GAAAgB,GAAA,CAAAhB,IAAA;QACA,KAAAkB,sBAAA;MACA,SAAAC,GAAA;QACAC,KAAA;MACA;IACA;IACA,MAAAF,uBAAA;MACA;QACA,MAAAF,GAAA,SAAApB,KAAA,CAAAqB,GAAA,0BAAAjB,IAAA,IAAAqB,UAAA;QACA,KAAAhB,WAAA,GAAAW,GAAA,CAAAhB,IAAA;MACA,SAAAmB,GAAA;QACAC,KAAA;MACA;IACA;IACAE,kBAAA;MACA,SAAAhB,QAAA;QACA,KAAAA,QAAA;MACA;IACA;IACAiB,kBAAA;MACA,SAAAjB,QAAA;QACA,KAAAA,QAAA;MACA;IACA;IACA,MAAAkB,gBAAApB,EAAA,EAAAqB,KAAA;MACA;QACA,MAAA7B,KAAA,CAAA8B,IAAA;UACAzB,SAAA,EAAAG,EAAA;UACAE,QAAA,OAAAA,QAAA;UACAqB,WAAA,EAAAF,KAAA,QAAAnB;QACA;QACA,KAAAsB,YAAA;QACAR,KAAA;MACA,SAAAD,GAAA;QACAC,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}